<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Credit Card Applications</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="text-primary">All Credit Card Applications</h2>
  <a class="btn btn-primary" href="/card/form">+ New Application</a>

</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-dark">
    <tr>
      <th>Application ID</th>
      <th>Applicant Name</th>
      <th>Income</th>
      <th>CIBIL</th>
      <th>Card Type</th>
      <th>Decision</th>
      <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${#lists.isEmpty(cards)}">
      <td colspan="7" class="text-center text-muted py-3">No applications found</td>
    </tr>

    <tr th:each="card : ${cards}">
      <td th:text="${card.appId}"></td>
      <td th:text="${card.applicantName}"></td>
      <td th:text="${#numbers.formatDecimal(card.income,1,'COMMA',2,'POINT')}"></td>
      <td th:text="${card.cibilScore}"></td>
      <td th:text="${card.cardType}"></td>
      <td>
          <span th:class="${card.decision == 'APPROVED' ? 'badge bg-success' :
                           card.decision == 'REJECTED' ? 'badge bg-danger' :
                           'badge bg-warning text-dark'}"
                th:text="${card.decision}">
          </span>
      </td>
      <td>
        <a th:href="@{'/card/' + ${card.appId}}" class="btn btn-sm btn-info text-white">View</a>
        <a th:href="@{'/card/' + ${card.appId} + '/transactions'}" class="btn btn-sm btn-secondary">Transactions</a>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <a class="btn btn-secondary" href="/user/dashboard">‚Üê Dashboard</a>
  </div>
</div>


</body>
</html>
